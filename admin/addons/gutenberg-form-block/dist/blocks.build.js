!function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(1)},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=r(2),a=(r.n(s),r(3)),i=(r.n(a),function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}()),u=wp.i18n.__,l=wp.blocks.registerBlockType,f=wp.components.SelectControl,h=wp.element.Component,p=function(e){function t(){o(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));if(e.state=e.constructor.getInitialState(e.props.attributes.selectedForm),hatchbuck_forms&&0!==e.state.selectedForm){var r=hatchbuck_forms.find(function(t){return t.id==e.state.selectedForm});e.setState({hb_form:r,hb_forms:hatchbuck_forms})}else e.setState({hb_forms:hatchbuck_forms});return e.onChangeSelectForm=e.onChangeSelectForm.bind(e),e}return c(t,e),i(t,null,[{key:"getInitialState",value:function(e){return{hb_forms:hatchbuck_forms,selectedForm:e,hb_form:{}}}}]),i(t,[{key:"onChangeSelectForm",value:function(e){var t=this.state.hb_forms.find(function(t){return t.id==parseInt(e)});0!==t.value?(this.setState({selectedForm:parseInt(e),hb_form:t}),this.props.setAttributes({selectedForm:parseInt(e),title:t.title,content:t.content,short_code:t.short_code})):(this.setState({selectedForm:parseInt(e),hb_form:t}),this.props.setAttributes({selectedForm:parseInt(e),title:"Select a Form",content:"No Hatchbuck Form Selected",short_code:"Select a Hatchbuck Form"}))}},{key:"render",value:function(){var e=[{value:0,label:u("Select a Form")}],t=u("Loading Hatchbuck Forms");if(this.state.hb_forms.length>0){t=u("We have %d forms. Choose one.").replace("%d",this.state.hb_forms.length),this.state.hb_forms.forEach(function(t){e.push({value:t.id,label:t.title})})}else t=u("No Hatchbuck Forms found. Please create some first.");return t=u(this.props.attributes.short_code),[!!this.props.isSelected&&wp.element.createElement(f,{onChange:this.onChangeSelectForm,value:this.props.attributes.selectedForm,label:u("Select a Form"),options:e}),t]}}]),t}(h);l("cgb/block-gutenberg-form-block",{title:u("Hatchbuck Forms"),icon:"shield",category:"common",keywords:[u("Hatchbuck"),u("Load"),u("Hatchbuck Forms")],attributes:{content:{type:"array",source:"children",selector:"p"},title:{type:"string",selector:"h2"},short_code:{type:"string",selector:"p"},selectedForm:{type:"number",default:0}},edit:p,save:function(e){return e.attributes.short_code}})},function(e,t){},function(e,t){}]);
